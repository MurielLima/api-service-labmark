@page
@model Labmark.Views.Account.IndexModel
@{
}
<div class="d-flex flex-column" id="content-wrapper">
    <div id="content">
        <div class="container-fluid">
            <div class="d-sm-flex justify-content-between align-items-center mb-4">
                <h3 class="text-dark mb-4">Funcionários</h3>
                <button class="btn btn-primary" type="button" style="background-color: #800040;"><a href="/Account/Register" style="text-decoration:none;color:azure">Novo Funcionário</a></button>
            </div>
                <div class="card shadow">
                    <div class="card-body">
                        <div class="table-responsive table mt-2" id="dataTable" role="grid" aria-describedby="dataTable_info">
                            <table class="table dataTable my-0" id="dataTableEmployees">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Editar</th>
                                        <th>Nome</th>
                                        <th style="width: 199px;">Email</th>
                                        <th style="width: 150px;">Telefone</th>
                                        <th style="width: 218px;">Endereço</th>
                                        <th>Cep</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th>ID</th>
                                        <th>Editar</th>
                                        <th>Nome</th>
                                        <th style="width: 199px;">Email</th>
                                        <th style="width: 150px;">Telefone</th>
                                        <th style="width: 218px;">Endereço</th>
                                        <th>Cep</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>
</div>
<script type="text/javascript">

    $(document).ready(function () {
        var table = $('#dataTableEmployees').DataTable({
            "deferRender": true,
            "pagingType": "simple_numbers",
            "order": [[2, "asc"]],
            "stateSave": true,
            "info": false,
            "ajax": {
                "url": "/api/v1/Account/List/",
                "type": "GET",
                "dataSrc": 'detail'
            },
            "columnDefs": [
                {
                    "targets": [0],
                    "visible": false,
                    "searchable": false
                }
            ],
            "columns": [
                {
                    "data": "id",
                    "orderable": false
                },
                {
                    "className": 'details-control',
                    "orderable": false,
                    "data": null,
                    "defaultContent": '',
                },
                { "data": "name" },
                { "data": "mail" },
                { "data": "phone" },
                { "data": "street" },
                { "data": "cep" },
            ],
            "rowCallback": function (row, data) {
                $(row.querySelector("tr > td.details-control")).click(function () {
                    window.location.href = "/Account/Edit?id=" + data.id;
                });
            },
            "language": {
                "paginate": {
                    "previous": "<<",
                    "next": ">>"
                },
                "lengthMenu": "Mostrando _MENU_",
                "search":"",
                "searchPlaceholder": "Filtrar"
            }
        });
    });

</script>