@page
@model Labmark.Pages.Client.IndexModel
@{
}
<div class="d-flex flex-column" id="content-wrapper">
    <div id="content">
        <div class="container-fluid">
            <div class="d-sm-flex justify-content-between align-items-center mb-4">
                <h3 class="text-dark mb-4">Clientes</h3>
                <button class="btn btn-primary" type="button" style="background-color: #800040;"><a href="/Client/Create" style="text-decoration:none;color:azure">Novo Cliente</a></button>
            </div>
            <div class="card shadow">
                <div class="card-body">
                    <div class="table-responsive table mt-2" id="dataTable" role="grid" aria-describedby="dataTable_info">
                        <table class="table dataTable my-0" id="dataTableClients">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Editar</th>
                                    <th>Nome</th>
                                    <th style="width: 199px;">CPF/CNPJ</th>
                                    <th style="width: 150px;">Telefone</th>
                                    <th style="width: 218px;">Email</th>
                                    <th>Cep</th>
                                    <th>Endereço</th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th>ID</th>
                                    <th>Editar</th>
                                    <th>Nome</th>
                                    <th>CPF/CNPJ</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Cep</th>
                                    <th>Endereço</th>
                                </tr>                             
                            </tfoot>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
        $(document).ready(function () {
            columns = [
                { "data": "name" },
                {
                    "data": null,
                    "render": function (data, type, full) {
                        console.log(full['cpf'] || full['cnpj']);
                        return full['cpf'] || full['cnpj'];
                    }
                },
                {
                    "data": null,
                    "render": function (data, type, full) {
                        return '(' + full['phones'][0].ddd + ') ' + full['phones'][0].number;
                    }
                },
                { "data": "mail" },
                { "data": "address.cep" },
                {
                    "data": null,
                    "render": function (data, type, full) {
                        return full['address'].street + ', ' + full['address'].number;
                    }
                },
            ];
            table('dataTableClients', '/api/v1/Client/List/', '/Client/Edit', columns);
        });

</script>